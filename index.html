<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pune House Price Prediction</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
    body { font-family: 'Inter', sans-serif; color: #f1f5f9; background: #1a1a2e; }
    #interactive-bg { position: fixed; inset: 0; width: 100vw; height: 100vh; z-index: -1; pointer-events: none;
      background: linear-gradient(120deg, #1a1a2e, #16213e, #0f3460);
      background-size: 600% 600%; animation: gradientShift 20s ease infinite; }
    @keyframes gradientShift { 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }
    .big-title { font-size: 42px; font-weight: 800; text-align: center; color: #fff; }
    .sub-caption { font-size: 18px; text-align: center; color: #d1d5db; margin-bottom: 20px; }
    label { font-size: 18px; font-weight: 600; color: #f1f5f9; }
    #predictBtn { background: linear-gradient(90deg,#06b6d4,#3b82f6); color:white; border-radius:10px; font-size:20px;
      font-weight:700; padding:12px 24px; transition:all 0.3s ease; }
    #predictBtn:hover { background: linear-gradient(90deg,#3b82f6,#06b6d4); transform: scale(1.05); }
  </style>
</head>
<body class="bg-gray-900 min-h-screen flex items-center justify-center p-4">
  <div id="interactive-bg"></div>

  <main class="w-full max-w-2xl bg-gray-800 bg-opacity-70 backdrop-blur-md p-8 rounded-2xl shadow-2xl space-y-8">
    <h1 class="big-title">üè† Pune House Price Prediction</h1>
    <p class="sub-caption">Enter property details to get an estimated market price</p>

    <div class="grid md:grid-cols-2 gap-6">
      <div class="space-y-2">
        <label>Total area (sqft)</label>
        <input type="number" id="totalSqft" value="1000" min="100" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-100">
      </div>
      <div class="space-y-2">
        <label>Bedrooms</label>
        <input type="number" id="bedrooms" value="2" min="1" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-100">
      </div>
      <div class="space-y-2">
        <label>Bathrooms</label>
        <input type="number" id="bathrooms" value="2" min="0" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-100">
      </div>
      <div class="space-y-2">
        <label>Balconies</label>
        <input type="number" id="balconies" value="1" min="0" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-100">
      </div>
    </div>

    <div class="space-y-2">
      <label>Location</label>
      <select id="location" class="w-full px-4 py-2 rounded-lg bg-gray-700 text-gray-100">
        <option value="Aundh">Aundh</option>
        <option value="Baner">Baner</option>
        <option value="Hinjawadi">Hinjawadi</option>
        <option value="Kothrud">Kothrud</option>
        <option value="Wakad">Wakad</option>
        <option value="Other">Other</option>
      </select>
    </div>

    <div class="flex justify-center mt-6">
      <button id="predictBtn">Predict Price</button>
    </div>

    <div id="result" class="text-center mt-6 hidden"></div>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const btn = document.getElementById("predictBtn");
      const resultDiv = document.getElementById("result");

      btn.addEventListener("click", async () => {
        const payload = {
          site_location: document.getElementById("location").value,
          total_sqft: parseFloat(document.getElementById("totalSqft").value),
          bedrooms: parseInt(document.getElementById("bedrooms").value),
          bath: parseInt(document.getElementById("bathrooms").value),
          balcony: parseInt(document.getElementById("balconies").value),
        };

        try {
          const res = await fetch("http://127.0.0.1:8000/predict", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });
          const data = await res.json();

          if (res.ok) {
            resultDiv.innerHTML = `<div class="text-green-500 font-bold text-2xl mt-4">üí∞ Estimated Price: ‚Çπ ${data.predicted_price.toFixed(2)} Lakhs</div>`;
          } else {
            resultDiv.innerHTML = `<div class="text-red-500 font-bold">Error: ${data.detail}</div>`;
          }
          resultDiv.classList.remove("hidden");
        } catch (err) {
          resultDiv.innerHTML = `<div class="text-red-500 font-bold">Server not reachable. Start FastAPI backend!</div>`;
          resultDiv.classList.remove("hidden");
        }
      });
    });
  </script>
</body>
</html>
